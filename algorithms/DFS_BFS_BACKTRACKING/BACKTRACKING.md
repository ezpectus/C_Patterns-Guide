# üîÅ Backtracking ‚Äî —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–±–æ—Ä–∞ —Å –æ—Ç–∫–∞—Ç–æ–º

## üí° –ò–Ω—Ç—É–∏—Ü–∏—è (–≤ —Å—Ç–∏–ª–µ AlgoMonster)

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –ø—Ä–æ—Ö–æ–¥–∏—à—å –ª–∞–±–∏—Ä–∏–Ω—Ç, –∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –≤—ã–±–∏—Ä–∞–µ—à—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.  
–ï—Å–ª–∏ –ø—É—Ç—å –æ–∫–∞–∑–∞–ª—Å—è —Ç—É–ø–∏–∫–æ–≤—ã–º ‚Äî —Ç—ã **–æ—Ç–∫–∞—Ç—ã–≤–∞–µ—à—å—Å—è –Ω–∞–∑–∞–¥**, –ø—Ä–æ–±—É–µ—à—å –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç.  
–≠—Ç–æ –∏ –µ—Å—Ç—å Backtracking: **–ø–æ–∏—Å–∫ —Å –æ—Ç–∫–∞—Ç–æ–º**, –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –Ω–æ —Å —É–º–Ω—ã–º –≤–æ–∑–≤—Ä–∞—Ç–æ–º.

üîπ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **—Ä–µ–∫—É—Ä—Å–∏—é**  
üîπ –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ ‚Äî –≤—ã–±–æ—Ä, –ø—Ä–æ–≤–µ—Ä–∫–∞, –æ—Ç–∫–∞—Ç  
üîπ –î–∞—ë—Ç **–≤—Å–µ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏**, –Ω–æ –Ω–µ —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ

---

## üì¶ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

| –°—Ü–µ–Ω–∞—Ä–∏–π                  | –ü–æ—á–µ–º—É Backtracking –ø–æ–¥—Ö–æ–¥–∏—Ç             |
|---------------------------|------------------------------------------|
| N-Queens, Sudoku          | –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏       |
| Subsets, Permutations     | –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π                  |
| Word Search, Maze Solver  | –ü–æ–∏—Å–∫ –ø—É—Ç–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏                   |
| –ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏      | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è + –ø–µ—Ä–µ–±–æ—Ä                   |

---

## üß™ –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω –Ω–∞ C

```c
void backtrack(int* path, int depth) {
    if (depth == target_depth) {
        // ‚úÖ –£—Å–ª–æ–≤–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚Äî —Ä–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ
        print(path);
        return;
    }

    for (int i = 0; i < n; i++) {
        if (used[i]) continue; // ‚ùå –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –≤—ã–±–æ—Ä

        path[depth] = i;       // üîß –°–¥–µ–ª–∞—Ç—å –≤—ã–±–æ—Ä
        used[i] = 1;

        backtrack(path, depth + 1); // üîÅ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤

        used[i] = 0;           // üîô –û—Ç–∫–∞—Ç
        path[depth] = -1;
    }
}
```


## üß© –°–∏–≥–Ω–∞–ª—ã

| –ö–æ–Ω—Ü–µ–ø—Ç           | –í—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞             | –†–æ–ª—å                                 |
|-------------------|-------------------------------|--------------------------------------|
| –£—Å–ª–æ–≤–∏–µ –≤—ã—Ö–æ–¥–∞    | `if (depth == target)`        | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤–µ—Ç–∫–∏                     |
| –ü—Ä–æ–ø—É—Å–∫           | `if (used[i]) continue;`      | –û—Ç—Å–µ–∏–≤–∞–Ω–∏–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤    |
| –í—ã–±–æ—Ä             | `path[depth] = i;`            | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Ä–µ—à–µ–Ω–∏–µ        |
| –†–µ–∫—É—Ä—Å–∏—è          | `backtrack(... + 1)`          | –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å         |
| –û—Ç–∫–∞—Ç             | `used[i] = 0; path[depth] = -1;` | –í–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é  |


## üìò –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Backtracking —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ —à–∞–≥–∏ –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –ø—É—Ç—å –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç.  
–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ ‚Äî —ç—Ç–æ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ä–µ–≤–∞ —Ä–µ—à–µ–Ω–∏–π. –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –¥–æ–ø—É—Å—Ç–∏–º—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º, –Ω–æ –Ω–µ —É–≥–ª—É–±–ª—è–µ—Ç—Å—è –≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ.

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- **–°–æ—Å—Ç–æ—è–Ω–∏–µ**: –º–∞—Å—Å–∏–≤ `path[]`, –≥–ª—É–±–∏–Ω–∞ `depth`, —Ñ–ª–∞–≥–∏ `used[]`  
- **–£—Å–ª–æ–≤–∏–µ –≤—ã—Ö–æ–¥–∞**: `if (depth == target)` ‚Äî —Ä–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ  
- **–¶–∏–∫–ª –≤—ã–±–æ—Ä–∞**: –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö `i`  
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: `if (used[i]) continue;` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è  
- **–í—ã–±–æ—Ä**: `path[depth] = i; used[i] = 1;` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ  
- **–†–µ–∫—É—Ä—Å–∏—è**: `backtrack(path, depth + 1);` ‚Äî –ø–µ—Ä–µ—Ö–æ–¥  
- **–û—Ç–∫–∞—Ç**: `used[i] = 0; path[depth] = -1;` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç

### üß† –ü–æ–≤–µ–¥–µ–Ω–∏–µ:

- –ê–ª–≥–æ—Ä–∏—Ç–º **–Ω–µ —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –≤–µ—Ç–∫–∏** ‚Äî –æ–Ω —Å—Ç—Ä–æ–∏—Ç –æ–¥–Ω—É, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è  
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ **–≥–ª—É–±–æ–∫–∏–π DFS**, –Ω–æ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è  
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏, –≥–¥–µ –≤–∞–∂–Ω—ã **–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

### üì¶ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å:

- –û–¥–∏–Ω —à–∞–±–ª–æ–Ω ‚Äî –¥–µ—Å—è—Ç–∫–∏ –∑–∞–¥–∞—á  
- –ú–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ:
  - `is_valid()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç–∏  
  - `is_solution()` ‚Äî —É—Å–ª–æ–≤–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è  
  - `apply()` / `undo()` ‚Äî –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º


## üì¶ –®–∞–±–ª–æ–Ω –¥–ª—è –ª—é–±–æ–π –∑–∞–¥–∞—á–∏
```c
void backtrack(State state) {
    if (is_solution(state)) {
        save(state);
        return;
    }

    for (option in valid_options(state)) {
        apply(state, option);
        backtrack(state);
        undo(state, option);
    }
}
```

- üîπ –í—Å—Ç–∞–≤–ª—è–µ—à—å is_solution() ‚Äî –ø–æ–ª—É—á–∞–µ—à—å —É—Å–ª–æ–≤–∏–µ 
- üîπ –í—Å—Ç–∞–≤–ª—è–µ—à—å valid_options() ‚Äî –ø–æ–ª—É—á–∞–µ—à—å –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —à–∞–≥–∏ 
- üîπ –í—Å—Ç–∞–≤–ª—è–µ—à—å apply/undo ‚Äî –ø–æ–ª—É—á–∞–µ—à—å –æ—Ç–∫–∞—Ç 
- üîπ –û–¥–∏–Ω —à–∞–±–ª–æ–Ω ‚Äî –¥–µ—Å—è—Ç–∫–∏ –∑–∞–¥–∞—á


## ‚úÖ –í—ã–≤–æ–¥
- Backtracking ‚Äî —ç—Ç–æ —É–º–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã. 
- –û–Ω —Å—Ç—Ä–æ–∏—Ç –¥–µ—Ä–µ–≤–æ —Ä–µ—à–µ–Ω–∏–π, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞–∑–∞–¥, –∫–æ–≥–¥–∞ –ø—É—Ç—å –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç. 
- –ï—Å–ª–∏ BFS ‚Äî —ç—Ç–æ –≤–æ–ª–Ω–∞, DFS ‚Äî —ç—Ç–æ —Ç—É–Ω–Ω–µ–ª—å, —Ç–æ Backtracking ‚Äî —ç—Ç–æ –º–∞—Å—Ç–µ—Ä –ø–µ—Ä–µ–±–æ—Ä–∞ —Å –æ—Ç–∫–∞—Ç–æ–º. 
- –ù–æ–≤–∏—á–∫—É –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ: –≤—ã–±–æ—Ä ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí —Ä–µ–∫—É—Ä—Å–∏—è ‚Üí –æ—Ç–∫–∞—Ç ‚Äî –∏ —Ç—ã –≥–æ—Ç–æ–≤ —Ä–µ—à–∞—Ç—å –ª—é–±—É—é –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–Ω—É—é –∑–∞–¥–∞—á—É.



---

